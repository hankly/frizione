
if(!this.clutch){clutch={};}
clutch.isGearsInstalled=function(){if(window){return window.google&&google&&google.gears;}
else{return google&&google.gears;}};clutch.gearsFactory=function(){return google.gears.factory;};clutch.createGearsDatabase=function(){return google.gears.factory.create('beta.database');};clutch.createGearsDesktop=function(){return google.gears.factory.create('beta.desktop');};clutch.createGearsHttpRequest=function(){return google.gears.factory.create('beta.httprequest');};clutch.createGearsLocalServer=function(){return google.gears.factory.create('beta.localserver');};clutch.createGearsTimer=function(){return google.gears.factory.create('beta.timer');};clutch.createGearsWorkerPool=function(){return google.gears.factory.create('beta.workerpool');};if(!this.clutch){clutch={};}
if(!this.clutch.timer){clutch.timer={};}
(function(){var gearsTimer=null;if(window&&window.setTimeout){clutch.timer.setTimeout=function(code,millis){return window.setTimeout(code,millis);};clutch.timer.setInterval=function(code,millis){return window.setInterval(code,millis);};clutch.timer.clearTimeout=function(timerId){window.clearTimeout(timerId);};}
else{gearsTimer=clutch.createGearsTimer();clutch.timer.setTimeout=function(code,millis){return gearsTimer.setTimeout(code,millis);};clutch.timer.setInterval=function(code,millis){return gearsTimer.setInterval(code,millis);};clutch.timer.clearTimeout=function(timerId){gearsTimer.clearTimeout(timerId);};}})();function createTimerTests(){return clutch.test.unit('Timer Tests',{clutchTests:[{func:'startSetTimeout',callbacks:['timerSetTimeout']},{func:'startSetInterval',callbacks:['timerSetInterval']}],timerId:null,timerStart:null,startSetTimeout:function(){this.timerId=clutch.timer.setTimeout(this.timerSetTimeout,250);this.timerStart=new Date().getTime();this.assert(this.timerId!==null,"Timer Id is null");},timerSetTimeout:function(){clutch.timer.clearTimeout(this.timerId);var time=new Date().getTime()-this.timerStart;this.assert(time>=(250-25),"Time <= 250 ms ("+time+")");},startSetInterval:function(){this.timerId=clutch.timer.setInterval(this.timerSetInterval,250);this.timerStart=new Date().getTime();this.assert(this.timerId!==null,"Timer Id is null");},timerSetInterval:function(){clutch.timer.clearTimeout(this.timerId);var time=new Date().getTime()-this.timerStart;this.assert(time>=(250-25),"Time <= 250 ms ("+time+")");}},1000);}
function runClutchTests(){return createTimerTests();}